<!DOCTYPE html><html lang="en" data-astro-cid-4sn4zg3r> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Giscus comments integration ‚Äî timeline.523.life</title><meta name="description" content="Giscus comments integration"><link rel="canonical" href="https://timeline.523.life/blog/giscus-comments-integration"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><!-- Theme initialization script - runs before page renders to prevent flash --><script>
    (function() {
      function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) === ' ') c = c.substring(1, c.length);
          if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
      }
      const theme = getCookie('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script><style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}
</style>
<link rel="stylesheet" href="/_astro/_slug_.PR2ftYmk.css"><script type="module" src="/_astro/hoisted.PXGMLJ0_.js"></script></head> <body data-astro-cid-4sn4zg3r> <main data-astro-cid-4sn4zg3r> <header class="header" data-astro-cid-4sn4zg3r> <nav class="header-nav" data-astro-cid-4sn4zg3r> <a href="/" class="back-link" data-astro-cid-4sn4zg3r>‚Üê Go to timeline</a> <span class="about-header" data-astro-cid-4sn4zg3r>This is content from <a href="https://523.life" data-astro-cid-4sn4zg3r>Chase Pettet</a> and part of my public timeline</span> <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme" data-astro-cid-4sn4zg3r> <span class="sun-icon" data-astro-cid-4sn4zg3r>‚òÄÔ∏è</span> <span class="moon-icon" data-astro-cid-4sn4zg3r>üåô</span> </button> </nav> <div class="meta" data-astro-cid-4sn4zg3r> <span class="type" data-astro-cid-4sn4zg3r>blog</span> ¬∑ <time datetime="2025-10-28T00:00:00.000Z" data-astro-cid-4sn4zg3r>10/28/2025</time>  </div> <h1 data-astro-cid-4sn4zg3r>Giscus comments integration</h1> </header>  <article class="content" data-astro-cid-4sn4zg3r><p>I added comment functionality to the timeline site using Giscus, a comments system powered by GitHub Discussions.</p>
<h2>Why Giscus</h2>
<p>Requirements for a comments system were simple: no database, minimal maintenance, and direct moderation within the existing workflow. Giscus fits these constraints by using GitHub Discussions as the backend. Comments appear on timeline items and blog posts, stored as GitHub Discussions and manageable within the repository.</p>
<h2>Implementation</h2>
<p>The integration has three components: global configuration, per-item control, and rendering.</p>
<h3>Global Configuration</h3>
<p>Comments can be disabled site-wide via <code>config.ts</code>:</p>
<pre><code class="language-typescript">export const config = {
  commentsEnabled: true,
} as const;
</code></pre>
<p>When set to false, comments are hidden everywhere. Individual items can still disable comments via hashtags.</p>
<h3>Per-Item Control</h3>
<p>Specific items can disable comments using the <code>#nocomments</code> or <code>#nc</code> hashtag. This works across content types:</p>
<ul>
<li>Blog posts: add the tag to markdown frontmatter</li>
<li>Timeline items: add the hashtag in content text or as a tag</li>
</ul>
<h3>Rendering</h3>
<p>For blog posts, Giscus loads with a pathname mapping strategy. Each post gets its own discussion thread. The script loads when the page loads and renders below the content.</p>
<p>For timeline items, Giscus loads dynamically when opening an item. The script is removed when closing the panel to avoid conflicts. This keeps the timeline responsive.</p>
<h2>Technical Details</h2>
<h3>Configuration</h3>
<p>Giscus connects to the <code>chasemp/timeline</code> repository with the category &quot;Ideas&quot; (category ID <code>DIC_kwDOQDOMbM4CxLZb</code>). The mapping strategy is &quot;specific&quot; for timeline items, using the item ID as the discussion term. Blog posts use pathname mapping.</p>
<p>A custom theme in <code>giscus-custom.css</code> centers the sign-in button and positions it at the top of the comments section.</p>
<h3>Error Handling</h3>
<p>If Giscus fails to load, the comments section hides after a 10-second timeout. This prevents displaying empty sections and keeps the interface clean.</p>
<h3>References</h3>
<ul>
<li><a href="https://giscus.app/">Giscus documentation</a></li>
<li><a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/enabling-or-disabling-github-discussions-for-a-repository">GitHub Discussions configuration</a></li>
</ul>
</article> <div class="comments-section" id="comments-section" data-astro-cid-4sn4zg3r> <div class="giscus" id="giscus-container" data-astro-cid-4sn4zg3r></div> </div> <footer class="post-footer" data-astro-cid-4sn4zg3r> <a href="/" class="back-link" data-astro-cid-4sn4zg3r>‚Üê Go to timeline</a>  </footer> </main>   <script src="https://giscus.app/client.js" data-repo="chasemp/timeline" data-repo-id="R_kgDOQDOMbA" data-category="Ideas" data-category-id="DIC_kwDOQDOMbM4CxLZb" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="/giscus-custom.css" data-lang="en" crossorigin="anonymous" async>
    </script> <script>
      window.addEventListener('load', () => {
        const container = document.getElementById('giscus-container');
        const commentsSection = document.getElementById('comments-section');
        
        setTimeout(() => {
          if (container && commentsSection) {
            const hasContent = container.innerHTML.trim() !== '';
            if (!hasContent) {
              commentsSection.style.display = 'none';
            }
          }
        }, 10000);
      });
    </script>   </body> </html>
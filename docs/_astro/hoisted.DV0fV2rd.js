import"./hoisted.BScVxmeO.js";const R=document.getElementById("theme-toggle"),v=R?.querySelector(".theme-icon"),C=document.documentElement;function X(e,t,s=365){const n=new Date;n.setTime(n.getTime()+s*24*60*60*1e3),document.cookie=`${e}=${t};expires=${n.toUTCString()};path=/;domain=.523.life`}function Z(e){const t=e+"=",s=document.cookie.split(";");for(let n=0;n<s.length;n++){let a=s[n];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null}const z=Z("theme")||"dark";C.setAttribute("data-theme",z);v&&(v.textContent=z==="dark"?"☀️":"🌙");R?.addEventListener("click",()=>{const t=C.getAttribute("data-theme")==="dark"?"light":"dark";C.setAttribute("data-theme",t),X("theme",t),v&&(v.textContent=t==="dark"?"☀️":"🌙")});window.addEventListener("DOMContentLoaded",()=>{if(window.PagefindUI)new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}});else{const e=document.getElementById("search-container");e&&(e.innerHTML='<div style="padding: 10px; color: var(--muted); font-size: 14px; text-align: center;">Search available in production build</div>')}});const g=new URLSearchParams(location.search),J=new Set((g.get("types")??"blog,saved,bluesky,release,wikipedia").split(",").filter(Boolean)),S=document.querySelectorAll('input[name="type"]');S.forEach(e=>{e.checked=J.has(e.value),e.addEventListener("change",b)});function b(){const e=Array.from(S).filter(t=>t.checked).map(t=>t.value);e.length===0?g.delete("types"):g.set("types",e.join(",")),history.replaceState({},"",g.toString()?`?${g.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:e}}))}const c=new Set,d=document.getElementById("hashtag-dropdown-btn"),w=document.getElementById("hashtag-dropdown-menu"),k=document.getElementById("selected-hashtag-count"),I=document.querySelectorAll('.hashtag-option input[type="checkbox"]');function O(e){return{"#blog":"blog","#article":"saved","#bluesky":"bluesky","#wikipedia":"wikipedia","#release":"release"}[e]||null}document.getElementById("select-all")?.addEventListener("click",()=>{S.forEach(e=>e.checked=!0),b()});document.getElementById("select-none")?.addEventListener("click",()=>{S.forEach(t=>t.checked=!1),I.forEach(t=>t.checked=!1),c.clear(),M();const e=document.querySelector(".pagefind-ui__search-input");e&&(e.value="",e.dispatchEvent(new Event("input",{bubbles:!0}))),b()});function M(){document.dispatchEvent(new CustomEvent("hashtag:changed",{detail:{hashtags:Array.from(c)}})),c.size>0?(k.textContent=c.size.toString(),k.removeAttribute("hidden")):k.setAttribute("hidden","")}d?.addEventListener("click",e=>{e.stopPropagation(),d.getAttribute("aria-expanded")==="true"?(w?.setAttribute("hidden",""),d.setAttribute("aria-expanded","false")):(w?.removeAttribute("hidden"),d.setAttribute("aria-expanded","true"))});I.forEach(e=>{e.addEventListener("change",()=>{const t=e.dataset.hashtag;if(e.checked){c.add(t);const s=O(t);if(s){const n=document.querySelector(`input[name="type"][value="${s}"]`);n&&!n.checked&&(n.checked=!0,b())}}else c.delete(t);M(),B()})});window.addEventListener("hashtag:click",e=>{const t=e.detail.tag;if(c.has(t))c.delete(t);else{c.add(t);const n=O(t);if(n){const a=document.querySelector(`input[name="type"][value="${n}"]`);a&&!a.checked&&(a.checked=!0,b())}}const s=Array.from(I).find(n=>n.dataset.hashtag===t);s&&(s.checked=c.has(t)),M(),B(),c.has(t)&&(d?.classList.add("flash-notification"),setTimeout(()=>d?.classList.remove("flash-notification"),600))});function B(){document.querySelectorAll(".card-hashtag").forEach(e=>{const t=e.dataset.hashtag;t&&c.has(t)?e.classList.add("hashtag-selected"):e.classList.remove("hashtag-selected")})}B();document.addEventListener("click",e=>{!d?.contains(e.target)&&!w?.contains(e.target)&&(w?.setAttribute("hidden",""),d?.setAttribute("aria-expanded","false"))});const j=new URLSearchParams(location.search),H=(j.get("types")??"").split(",").filter(Boolean);let f=new Set;const _=document.getElementById("empty-state"),P=document.querySelector(".list"),U=document.getElementById("current-date"),K=document.getElementById("reset-machine");U&&(U.textContent=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}));K?.addEventListener("click",e=>{e.preventDefault(),window.location.href=window.location.pathname});function F(){Array.from(document.querySelectorAll(".row:not(.today-marker)")).filter(t=>t.style.display!=="none").length===0?(_?.removeAttribute("hidden"),P?.setAttribute("hidden","")):(_?.setAttribute("hidden",""),P?.removeAttribute("hidden"))}function N(){const e=new Set(H.length?H:Array.from(document.querySelectorAll('input[name="type"]')).map(t=>t.value));document.querySelectorAll(".row").forEach(t=>{const s=t.dataset.type,n=t.dataset.hashtags?.split(",").filter(Boolean)||[],a=e.size===0?!1:e.has(s),i=f.size===0||n.some(o=>f.has(o));t.style.display=a&&i?"":"none"}),F()}N();document.addEventListener("filters:changed",e=>{const t=new Set(e.detail.types.length?e.detail.types:[]);document.querySelectorAll(".row").forEach(s=>{const n=s.dataset.type,a=s.dataset.hashtags?.split(",").filter(Boolean)||[],i=t.size===0?!1:t.has(n),o=f.size===0||a.some(l=>f.has(l));s.style.display=i&&o?"":"none"}),F()});document.addEventListener("hashtag:changed",e=>{f=new Set(e.detail.hashtags),N()});const r=document.getElementById("detail-panel"),u=document.getElementById("panel-content"),G=document.getElementById("panel-title-text"),T=document.getElementById("panel-source-wrapper"),V=document.getElementById("panel-source"),E=document.getElementById("panel-close"),$=document.getElementById("panel-backdrop"),x=document.getElementById("swipe-indicator"),m=()=>window.innerWidth<=980;let y=u.innerHTML;(!y||y.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{y=u.innerHTML},100));function Q(e=!0){e&&m()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function ee(e){try{const s=await(await fetch(e)).text(),a=new DOMParser().parseFromString(s,"text/html"),i=a.querySelector("article")||a.querySelector("main")||a.querySelector(".content");return i?i.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function W(e){const t=window.__TIMELINE__.find(o=>o.id===e);if(!t)return;m()?($.removeAttribute("hidden"),r.classList.add("mobile-open"),E.removeAttribute("hidden"),x.removeAttribute("hidden"),Q(!0)):(E.setAttribute("hidden",""),x.setAttribute("hidden",""));const s=t.type==="saved"?"Article Read":t.type.toUpperCase();G.textContent=`${s} · ${new Date(t.timestamp).toLocaleString()}`,t.url?(V.href=t.url,T.removeAttribute("hidden")):T.setAttribute("hidden",""),u.innerHTML="<p>Loading...</p>";let n="";if(t.type==="blog"){const o=`/blog/${t.id.replace("blog:","")}`,l=await ee(o);n=`<h3 class="detail-title">${t.title||""}</h3>
        <div class="detail-content">${l}</div>`}else{let o="";if(t.type==="saved"){const p=[];t.metadata?.site_name&&p.push(`📰 ${t.metadata.site_name}`),t.author&&p.push(`✍️ ${t.author}`),t.metadata?.reading_time&&p.push(`⏱️ ${t.metadata.reading_time}`),p.length>0&&(o=`<div class="detail-metadata">${p.join(" • ")}</div>`)}const l=t.content_html||`<p>${t.summary||""}</p>`;n=`<h3 class="detail-title">${t.title||""}</h3>
        <div class="detail-content">${l}${o}</div>`}const a=ne(t);a||(n+=`
        <div class="panel-comments">
          <div class="giscus" id="giscus-${e}"></div>
        </div>
      `),u.innerHTML=n,a||te(e);const i=new URLSearchParams(location.search);i.set("id",e),history.replaceState({},"",`?${i.toString()}`)}function te(e){const t=document.querySelector('script[src="https://giscus.app/client.js"]');t&&t.remove();const s=document.getElementById(`giscus-${e}`);if(!s)return;const n=document.createElement("script");n.src="https://giscus.app/client.js",n.setAttribute("data-repo","chasemp/timeline"),n.setAttribute("data-repo-id","R_kgDOQDOMbA"),n.setAttribute("data-category","Ideas"),n.setAttribute("data-category-id","DIC_kwDOQDOMbM4CxLZb"),n.setAttribute("data-mapping","specific"),n.setAttribute("data-term",e),n.setAttribute("data-strict","0"),n.setAttribute("data-reactions-enabled","1"),n.setAttribute("data-emit-metadata","0"),n.setAttribute("data-input-position","bottom"),n.setAttribute("data-theme","/giscus-custom.css"),n.setAttribute("data-lang","en"),n.setAttribute("crossorigin","anonymous"),n.async=!0,n.onerror=()=>{const a=s.closest(".panel-comments");a&&(a.style.display="none")},document.body.appendChild(n),setTimeout(()=>{if(s.innerHTML.trim()===""){const a=s.closest(".panel-comments");a&&(a.style.display="none")}},1e4)}function L(){m()&&($.setAttribute("hidden",""),r.classList.remove("mobile-open"),x.setAttribute("hidden",""),Q(!1));const e=document.querySelector('script[src="https://giscus.app/client.js"]');e&&e.remove(),u.querySelectorAll(".giscus").forEach(n=>n.innerHTML=""),G.textContent="About",T.setAttribute("hidden",""),u.innerHTML=y,E.setAttribute("hidden","");const s=new URLSearchParams(location.search);s.delete("id"),history.replaceState({},"",`?${s.toString()}`)}function ne(e){if(window.__CONFIG__?.commentsEnabled===!1)return!0;const n=(e.hashtags||[]).some(o=>o.toLowerCase()==="#nocomments"||o.toLowerCase()==="#nc"),i=(e.tags||[]).some(o=>{const l=o.toLowerCase().replace(/\s+/g,"_");return l==="nocomments"||l==="nc"});return n||i}E.addEventListener("click",L);$.addEventListener("click",L);document.addEventListener("keydown",e=>{e.key==="Escape"&&(m()?r.classList.contains("mobile-open"):u.innerHTML!==y)&&L()});let D=0,q=0,A=!1;r.addEventListener("touchstart",e=>{!m()||!r.classList.contains("mobile-open")||(D=e.touches[0].clientY,q=Date.now(),A=!1)},{passive:!0});r.addEventListener("touchmove",e=>{if(!m()||!r.classList.contains("mobile-open"))return;const s=e.touches[0].clientY-D,n=Date.now()-q;if(s>50&&n<500){A=!0;const a=Math.min(s*.3,100);r.style.transform=`translateY(${a}px)`}},{passive:!0});r.addEventListener("touchend",e=>{if(!m()||!r.classList.contains("mobile-open"))return;const s=e.changedTouches[0].clientY-D,n=Date.now()-q;r.style.transform="",A&&s>100&&n<500&&L(),A=!1},{passive:!0});document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),W(e.dataset.id)})});const h=document.getElementById("tooltip"),se=h.querySelector(".tooltip-title"),ae=h.querySelector(".tooltip-meta");function oe(e){const s=Math.min(window.innerHeight-80,Math.max(0,e.top+window.scrollY+10)),n=Math.min(window.innerWidth-380,Math.max(0,e.left+window.scrollX+10));h.style.top=`${s}px`,h.style.left=`${n}px`}function ie(e){const t=e.dataset.timestamp,s=e.dataset.dotType,n=new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),a={blog:"📝",saved:"🔖",bluesky:"🦋",posts:"🦋",release:"🏷️",wikipedia:"🌐",contributions:"🌐"},i={saved:"Article Read",bluesky:"Posts",posts:"Posts",wikipedia:"Contributions",contributions:"Contributions"},o=a[s]||"",l=i[s]||s.toUpperCase();se.textContent=`${o} ${l}`,ae.textContent=n,oe(e.getBoundingClientRect()),h.removeAttribute("hidden")}function ce(){h.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(e=>{const t=e;t.addEventListener("mouseenter",()=>ie(t)),t.addEventListener("mouseleave",ce)});const Y=j.get("id");Y&&W(Y);

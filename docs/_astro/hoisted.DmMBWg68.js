import"./hoisted.BScVxmeO.js";const H=document.getElementById("theme-toggle"),p=H?.querySelector(".theme-icon"),b=document.documentElement,P=localStorage.getItem("theme")||"light";b.setAttribute("data-theme",P);p&&(p.textContent=P==="dark"?"â˜€ï¸":"ðŸŒ™");H?.addEventListener("click",()=>{const e=b.getAttribute("data-theme")==="dark"?"light":"dark";b.setAttribute("data-theme",e),localStorage.setItem("theme",e),p&&(p.textContent=e==="dark"?"â˜€ï¸":"ðŸŒ™")});window.addEventListener("DOMContentLoaded",()=>{new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}})});const h=new URLSearchParams(location.search),N=new Set((h.get("types")??"blog,saved,bluesky,release,wikipedia").split(",").filter(Boolean)),f=document.querySelectorAll('input[name="type"]');f.forEach(t=>{t.checked=N.has(t.value),t.addEventListener("change",L)});function L(){const t=Array.from(f).filter(e=>e.checked).map(e=>e.value);t.length===0?h.delete("types"):h.set("types",t.join(",")),history.replaceState({},"",h.toString()?`?${h.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:t}}))}const c=new Set,d=document.getElementById("hashtag-dropdown-btn"),g=document.getElementById("hashtag-dropdown-menu"),E=document.getElementById("selected-hashtag-count"),A=document.querySelectorAll('.hashtag-option input[type="checkbox"]');document.getElementById("select-all")?.addEventListener("click",()=>{f.forEach(t=>t.checked=!0),L()});document.getElementById("select-none")?.addEventListener("click",()=>{f.forEach(e=>e.checked=!1),A.forEach(e=>e.checked=!1),c.clear(),k();const t=document.querySelector(".pagefind-ui__search-input");t&&(t.value="",t.dispatchEvent(new Event("input",{bubbles:!0}))),L()});function k(){document.dispatchEvent(new CustomEvent("hashtag:changed",{detail:{hashtags:Array.from(c)}})),c.size>0?(E.textContent=c.size.toString(),E.removeAttribute("hidden")):E.setAttribute("hidden","")}d?.addEventListener("click",t=>{t.stopPropagation(),d.getAttribute("aria-expanded")==="true"?(g?.setAttribute("hidden",""),d.setAttribute("aria-expanded","false")):(g?.removeAttribute("hidden"),d.setAttribute("aria-expanded","true"))});A.forEach(t=>{t.addEventListener("change",()=>{const e=t.dataset.hashtag;t.checked?c.add(e):c.delete(e),k(),I()})});window.addEventListener("hashtag:click",t=>{const e=t.detail.tag;c.has(e)?c.delete(e):c.add(e);const n=Array.from(A).find(o=>o.dataset.hashtag===e);n&&(n.checked=c.has(e)),k(),I(),c.has(e)&&(d?.classList.add("flash-notification"),setTimeout(()=>d?.classList.remove("flash-notification"),600))});function I(){document.querySelectorAll(".card-hashtag").forEach(t=>{const e=t.dataset.hashtag;e&&c.has(e)?t.classList.add("hashtag-selected"):t.classList.remove("hashtag-selected")})}I();document.addEventListener("click",t=>{!d?.contains(t.target)&&!g?.contains(t.target)&&(g?.setAttribute("hidden",""),d?.setAttribute("aria-expanded","false"))});const U=new URLSearchParams(location.search),T=(U.get("types")??"").split(",").filter(Boolean);let u=new Set;const $=document.getElementById("empty-state"),C=document.querySelector(".list"),q=document.getElementById("current-date"),W=document.getElementById("reset-machine");q&&(q.textContent=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}));W?.addEventListener("click",t=>{t.preventDefault(),window.location.href=window.location.pathname});function _(){Array.from(document.querySelectorAll(".row:not(.today-marker)")).filter(e=>e.style.display!=="none").length===0?($?.removeAttribute("hidden"),C?.setAttribute("hidden","")):($?.setAttribute("hidden",""),C?.removeAttribute("hidden"))}function R(){const t=new Set(T.length?T:Array.from(document.querySelectorAll('input[name="type"]')).map(e=>e.value));document.querySelectorAll(".row").forEach(e=>{const n=e.dataset.type,o=e.dataset.hashtags?.split(",").filter(Boolean)||[],i=t.has(n),a=u.size===0||o.some(s=>u.has(s));e.style.display=i&&a?"":"none"}),_()}R();document.addEventListener("filters:changed",t=>{const e=new Set(t.detail.types.length?t.detail.types:[]);document.querySelectorAll(".row").forEach(n=>{const o=n.dataset.type,i=n.dataset.hashtags?.split(",").filter(Boolean)||[],a=e.size===0?!1:e.has(o),s=u.size===0||i.some(v=>u.has(v));n.style.display=a&&s?"":"none"}),_()});document.addEventListener("hashtag:changed",t=>{u=new Set(t.detail.hashtags),R()});const B=document.getElementById("detail-panel"),l=document.getElementById("panel-content"),z=document.getElementById("panel-title-text"),S=document.getElementById("panel-source-wrapper"),O=document.getElementById("panel-source"),y=document.getElementById("panel-close"),x=document.getElementById("panel-backdrop"),w=()=>window.innerWidth<=980;let m=l.innerHTML;(!m||m.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{m=l.innerHTML},100));function F(t=!0){t&&w()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function X(t){try{const n=await(await fetch(t)).text(),i=new DOMParser().parseFromString(n,"text/html"),a=i.querySelector("article")||i.querySelector("main")||i.querySelector(".content");return a?a.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function j(t){const e=window.__TIMELINE__.find(a=>a.id===t);if(!e)return;w()?(x.removeAttribute("hidden"),B.classList.add("mobile-open"),y.removeAttribute("hidden"),F(!0)):y.setAttribute("hidden","");const n=e.type==="saved"?"Article Read":e.type.toUpperCase();z.textContent=`${n} Â· ${new Date(e.timestamp).toLocaleString()}`,e.url?(O.href=e.url,S.removeAttribute("hidden")):S.setAttribute("hidden",""),l.innerHTML="<p>Loading...</p>";let o="";if(e.type==="blog"){const a=`/blog/${e.id.replace("blog:","")}`,s=await X(a);o=`<h3 class="detail-title">${e.title||""}</h3>
        <div class="detail-content">${s}</div>`}else{let a="";if(e.type==="saved"){const s=[];e.metadata?.site_name&&s.push(`ðŸ“° ${e.metadata.site_name}`),e.author&&s.push(`âœï¸ ${e.author}`),e.metadata?.reading_time&&s.push(`â±ï¸ ${e.metadata.reading_time}`),s.length>0&&(a=`<div class="detail-metadata">${s.join(" â€¢ ")}</div>`)}o=`<h3 class="detail-title">${e.title||""}</h3>
        ${a}
        <div class="detail-content">${e.content_html||`<p>${e.summary||""}</p>`}</div>`}l.innerHTML=o;const i=new URLSearchParams(location.search);i.set("id",t),history.replaceState({},"",`?${i.toString()}`)}function M(){w()&&(x.setAttribute("hidden",""),B.classList.remove("mobile-open"),F(!1)),z.textContent="About",S.setAttribute("hidden",""),l.innerHTML=m,y.setAttribute("hidden","");const t=new URLSearchParams(location.search);t.delete("id"),history.replaceState({},"",`?${t.toString()}`)}y.addEventListener("click",M);x.addEventListener("click",M);document.addEventListener("keydown",t=>{t.key==="Escape"&&(w()?B.classList.contains("mobile-open"):l.innerHTML!==m)&&M()});document.querySelectorAll(".card").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),j(t.dataset.id)})});const r=document.getElementById("tooltip"),Y=r.querySelector(".tooltip-title"),G=r.querySelector(".tooltip-meta");function J(t){const n=Math.min(window.innerHeight-80,Math.max(0,t.top+window.scrollY+10)),o=Math.min(window.innerWidth-380,Math.max(0,t.left+window.scrollX+10));r.style.top=`${n}px`,r.style.left=`${o}px`}function K(t){const e=t.dataset.timestamp,n=t.dataset.dotType,o=new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),i={blog:"ðŸ“",saved:"ðŸ”–",bluesky:"ðŸ¦‹",release:"ðŸ·ï¸",wikipedia:"ðŸŒ"},a={saved:"Article Read"},s=i[n]||"",v=a[n]||n.toUpperCase();Y.textContent=`${s} ${v}`,G.textContent=o,J(t.getBoundingClientRect()),r.removeAttribute("hidden")}function Q(){r.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(t=>{const e=t;e.addEventListener("mouseenter",()=>K(e)),e.addEventListener("mouseleave",Q)});const D=U.get("id");D&&j(D);

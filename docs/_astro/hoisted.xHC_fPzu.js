import"./hoisted.BScVxmeO.js";const Z=document.getElementById("theme-toggle"),S=Z?.querySelector(".theme-icon"),B=document.documentElement;function ce(t,e,s=365){const n=new Date;n.setTime(n.getTime()+s*24*60*60*1e3),document.cookie=`${t}=${e};expires=${n.toUTCString()};path=/;domain=.523.life`}function re(t){const e=t+"=",s=document.cookie.split(";");for(let n=0;n<s.length;n++){let a=s[n];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return a.substring(e.length,a.length)}return null}const J=re("theme")||"dark";B.setAttribute("data-theme",J);S&&(S.textContent=J==="dark"?"â˜€ï¸":"ðŸŒ™");Z?.addEventListener("click",()=>{const e=B.getAttribute("data-theme")==="dark"?"light":"dark";B.setAttribute("data-theme",e),ce("theme",e),S&&(S.textContent=e==="dark"?"â˜€ï¸":"ðŸŒ™");const s=document.querySelector("iframe.giscus-frame");s&&s.contentWindow?.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")});window.addEventListener("DOMContentLoaded",()=>{if(window.PagefindUI)new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}});else{const t=document.getElementById("search-container");t&&(t.innerHTML='<div style="padding: 10px; color: var(--muted); font-size: 14px; text-align: center;">Search available in production build</div>')}});const y=new URLSearchParams(location.search),le=new Set((y.get("types")??"blog,saved,bluesky,pixelfed,hackernews,release,wikipedia").split(",").filter(Boolean)),f=document.querySelectorAll('input[name="type"]');function T(t){return t.split(",").filter(Boolean)}function de(t){return T(t).some(s=>le.has(s))}f.forEach(t=>{t.checked=de(t.value),t.addEventListener("change",E)});function E(){const t=new Set;Array.from(f).filter(s=>s.checked).forEach(s=>{T(s.value).forEach(n=>t.add(n))});const e=Array.from(t);e.length===0?y.delete("types"):y.set("types",e.join(",")),history.replaceState({},"",y.toString()?`?${y.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:e}}))}const r=new Set,h=document.getElementById("hashtag-dropdown-btn"),A=document.getElementById("hashtag-dropdown-menu"),D=document.getElementById("selected-hashtag-count"),x=document.querySelectorAll('.hashtag-option input[type="checkbox"]');function K(t){return{"#blog":["blog"],"#article":["saved"],"#bluesky":["bluesky","pixelfed"],"#pixelfed":["bluesky","pixelfed"],"#wikipedia":["wikipedia"],"#release":["release"]}[t]||[]}document.getElementById("select-all")?.addEventListener("click",()=>{f.forEach(t=>t.checked=!0),x.forEach(t=>t.checked=!1),r.clear(),C(),E()});document.getElementById("select-none")?.addEventListener("click",()=>{f.forEach(e=>e.checked=!1),x.forEach(e=>e.checked=!1),r.clear(),C();const t=document.querySelector(".pagefind-ui__search-input");t&&(t.value="",t.dispatchEvent(new Event("input",{bubbles:!0}))),E()});function C(){document.dispatchEvent(new CustomEvent("hashtag:changed",{detail:{hashtags:Array.from(r)}})),r.size>0?(D.textContent=r.size.toString(),D.removeAttribute("hidden")):D.setAttribute("hidden","")}h?.addEventListener("click",t=>{t.stopPropagation(),h.getAttribute("aria-expanded")==="true"?(A?.setAttribute("hidden",""),h.setAttribute("aria-expanded","false")):(A?.removeAttribute("hidden"),h.setAttribute("aria-expanded","true"))});x.forEach(t=>{t.addEventListener("change",()=>{const e=t.dataset.hashtag;if(t.checked){r.add(e);const s=K(e);if(s.length>0){let n=!1;f.forEach(a=>{T(a.value).some(i=>s.includes(i))&&!a.checked&&(a.checked=!0,n=!0)}),n&&E()}}else r.delete(e);C(),_()})});window.addEventListener("hashtag:click",t=>{const e=t.detail.tag;if(r.has(e))r.delete(e);else{r.add(e);const n=K(e);if(n.length>0){let a=!1;f.forEach(o=>{T(o.value).some(c=>n.includes(c))&&!o.checked&&(o.checked=!0,a=!0)}),a&&E()}}const s=Array.from(x).find(n=>n.dataset.hashtag===e);s&&(s.checked=r.has(e)),C(),_(),r.has(e)&&(h?.classList.add("flash-notification"),setTimeout(()=>h?.classList.remove("flash-notification"),600))});function _(){document.querySelectorAll(".card-hashtag").forEach(t=>{const e=t.dataset.hashtag;e&&r.has(e)?t.classList.add("hashtag-selected"):t.classList.remove("hashtag-selected")})}_();document.addEventListener("click",t=>{!h?.contains(t.target)&&!A?.contains(t.target)&&(A?.setAttribute("hidden",""),h?.setAttribute("aria-expanded","false"))});const ee=new URLSearchParams(location.search),V=(ee.get("types")??"").split(",").filter(Boolean);let w=new Set;const W=document.getElementById("empty-state"),G=document.querySelector(".list"),Q=document.getElementById("current-date"),ue=document.getElementById("reset-machine");Q&&(Q.textContent=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}));ue?.addEventListener("click",t=>{t.preventDefault(),window.location.href=window.location.pathname});function he(t){const e=new Date(t),s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${s}/${n}/${a}`}function te(){Array.from(document.querySelectorAll(".row:not(.today-marker)")).filter(e=>e.style.display!=="none").length===0?(W?.removeAttribute("hidden"),G?.setAttribute("hidden","")):(W?.setAttribute("hidden",""),G?.removeAttribute("hidden"))}function ne(){const e=Array.from(document.querySelectorAll('input[name="type"]')).map(n=>n.value).flatMap(n=>n.split(",").filter(Boolean)),s=new Set(V.length?V:e);document.querySelectorAll(".row").forEach(n=>{const a=n.dataset.type,o=n.dataset.hashtags?.split(",").filter(Boolean)||[],i=s.size===0?!1:s.has(a),c=w.size===0||o.some(u=>w.has(u));n.style.display=i&&c?"":"none"}),te()}ne();document.addEventListener("filters:changed",t=>{const e=new Set(t.detail.types.length?t.detail.types:[]);document.querySelectorAll(".row").forEach(s=>{const n=s.dataset.type,a=s.dataset.hashtags?.split(",").filter(Boolean)||[],o=e.size===0?!1:e.has(n),i=w.size===0||a.some(c=>w.has(c));s.style.display=o&&i?"":"none"}),te()});document.addEventListener("hashtag:changed",t=>{w=new Set(t.detail.hashtags),ne()});const l=document.getElementById("detail-panel"),m=document.getElementById("panel-content"),se=document.getElementById("panel-title-text"),q=document.getElementById("panel-source-wrapper"),me=document.getElementById("panel-source"),v=document.getElementById("panel-close-left"),P=document.getElementById("panel-backdrop"),H=document.getElementById("swipe-indicator"),p=()=>window.innerWidth<=980;let b=m.innerHTML;(!b||b.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{b=m.innerHTML},100));function ae(t=!0){t&&p()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function pe(t){try{const s=await(await fetch(t)).text(),a=new DOMParser().parseFromString(s,"text/html"),o=a.querySelector("article")||a.querySelector("main")||a.querySelector(".content");return o?o.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function oe(t){const e=window.__TIMELINE__.find(u=>u.id===t);if(!e)return;p()?(P.removeAttribute("hidden"),l.classList.add("mobile-detail-open"),v.removeAttribute("hidden"),H.removeAttribute("hidden"),ae(!0)):(v.removeAttribute("hidden"),H.setAttribute("hidden",""));const n={saved:"Article Read",linkedin:"LinkedIn",bluesky:"Posts",pixelfed:"Photo",hackernews:"Comment",wikipedia:"Contributions",contributions:"Contributions"}[e.type]||e.type.toUpperCase(),a=he(e.timestamp);se.textContent=`${n} Â· ${a}`,e.url?(me.href=e.url,q.removeAttribute("hidden")):q.setAttribute("hidden",""),m.innerHTML="<p>Loading...</p>";let o="";if(e.type==="blog"){const u=`/blog/${e.id.replace("blog:","")}`,k=await pe(u);o=`<h3 class="detail-title">${e.title||""}</h3>
        <div class="detail-content">${k}</div>`}else{let u="";if(e.type==="saved"||e.type==="linkedin"){const d=[];e.metadata?.site_name&&d.push(`ðŸ“° ${e.metadata.site_name}`),e.author&&d.push(`âœï¸ ${e.author}`),e.metadata?.reading_time&&d.push(`â±ï¸ ${e.metadata.reading_time}`),d.length>0&&(u=`<div class="detail-metadata">${d.join(" â€¢ ")}</div>`)}let k="";if(e.url&&(e.url.includes("youtube.com/watch")||e.url.includes("youtu.be/"))){const d=e.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&?/]+)/)?.[1];d&&(k=`<div class="video-embed"><iframe width="560" height="315" src="https://www.youtube.com/embed/${d}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`)}let F="",R="";if(e.content_html){const j=new DOMParser().parseFromString(e.content_html,"text/html"),M=j.querySelector(".notes");M&&M.textContent?.trim()&&(F=`<h4>Notes</h4><div class="notes-content">${M.innerHTML}</div>`);const z=j.querySelector(".highlights");if(z){const N=Array.from(z.querySelectorAll("li")).map(I=>I.innerHTML);N.length>0&&(R=`<h4>Highlights</h4><ul class="highlights-list">${N.map(I=>`<li>${I}</li>`).join("")}</ul>`)}}let O="";e.type==="hackernews"&&e.metadata?.comment_url&&(O=`<div class="comment-direct-link"><a href="${e.metadata.comment_url}" target="_blank" rel="noopener">Direct link to comment â†—</a></div>`);const ie=e.summary?`<p>${e.summary}</p>`:"";o=`${e.title?`<h3 class="detail-title">${e.title}</h3>`:""}
        ${k}
        <div class="detail-content">${ie}${O}${u}${F}${R}</div>`}const i=fe(e);i||(o+=`
        <div class="panel-comments">
          <div class="giscus" id="giscus-${t}"></div>
        </div>
      `),m.innerHTML=o,i||ge(t);const c=new URLSearchParams(location.search);c.set("id",t),history.replaceState({},"",`?${c.toString()}`)}function ge(t){const e=document.querySelector('script[src="https://giscus.app/client.js"]');e&&e.remove();const s=document.getElementById(`giscus-${t}`);if(!s)return;const n=document.createElement("script");n.src="https://giscus.app/client.js",n.setAttribute("data-repo","chasemp/timeline"),n.setAttribute("data-repo-id","R_kgDOQDOMbA"),n.setAttribute("data-category","Ideas"),n.setAttribute("data-category-id","DIC_kwDOQDOMbM4CxLZb"),n.setAttribute("data-mapping","specific"),n.setAttribute("data-term",t),n.setAttribute("data-strict","0"),n.setAttribute("data-reactions-enabled","1"),n.setAttribute("data-emit-metadata","0"),n.setAttribute("data-input-position","bottom");const a=document.documentElement.getAttribute("data-theme")||"dark";n.setAttribute("data-theme",a==="light"?"light":"dark"),n.setAttribute("data-lang","en"),n.setAttribute("crossorigin","anonymous"),n.async=!0,n.onerror=()=>{const o=s.closest(".panel-comments");o&&(o.style.display="none")},document.body.appendChild(n),setTimeout(()=>{if(s.innerHTML.trim()===""){const o=s.closest(".panel-comments");o&&(o.style.display="none")}},1e4)}function $(){p()&&(P.setAttribute("hidden",""),l.classList.remove("mobile-detail-open"),H.setAttribute("hidden",""),v.setAttribute("hidden",""),ae(!1));const t=document.querySelector('script[src="https://giscus.app/client.js"]');t&&t.remove(),m.querySelectorAll(".giscus").forEach(n=>n.innerHTML=""),se.textContent="About",q.setAttribute("hidden",""),m.innerHTML=b,v.setAttribute("hidden","");const s=new URLSearchParams(location.search);s.delete("id"),history.replaceState({},"",`?${s.toString()}`)}function fe(t){const e=window.__CONFIG__;if(e?.commentsEnabled===!1||e?.disableCommentsForTypes?.includes(t.type))return!0;const n=(t.hashtags||[]).some(i=>i.toLowerCase()==="#nocomments"||i.toLowerCase()==="#nc"),o=(t.tags||[]).some(i=>{const c=i.toLowerCase().replace(/\s+/g,"_");return c==="nocomments"||c==="nc"});return n||o}v.addEventListener("click",$);P.addEventListener("click",$);document.addEventListener("keydown",t=>{t.key==="Escape"&&(p()?l.classList.contains("mobile-detail-open"):m.innerHTML!==b)&&$()});let U=0,Y=0,L=!1;l.addEventListener("touchstart",t=>{!p()||!l.classList.contains("mobile-detail-open")||(U=t.touches[0].clientY,Y=Date.now(),L=!1)},{passive:!0});l.addEventListener("touchmove",t=>{if(!p()||!l.classList.contains("mobile-detail-open"))return;const s=t.touches[0].clientY-U,n=Date.now()-Y;if(s>50&&n<500){L=!0;const a=Math.min(s*.3,100);l.style.transform=`translateY(${a}px)`}},{passive:!0});l.addEventListener("touchend",t=>{if(!p()||!l.classList.contains("mobile-detail-open"))return;const s=t.changedTouches[0].clientY-U,n=Date.now()-Y;l.style.transform="",L&&s>100&&n<500&&$(),L=!1},{passive:!0});document.querySelectorAll(".card").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),oe(t.dataset.id)})});const g=document.getElementById("tooltip"),ye=g.querySelector(".tooltip-title"),be=g.querySelector(".tooltip-meta");function we(t){const s=Math.min(window.innerHeight-80,Math.max(0,t.top+window.scrollY+10)),n=Math.min(window.innerWidth-380,Math.max(0,t.left+window.scrollX+10));g.style.top=`${s}px`,g.style.left=`${n}px`}function ve(t){const e=t.dataset.timestamp,s=t.dataset.dotType,n=new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),a={blog:"ðŸ“",saved:"ðŸ”–",bluesky:"ðŸ¦‹",pixelfed:"ðŸ“·",hackernews:"ðŸ’¬",posts:"ðŸ¦‹",release:"ðŸ·ï¸",wikipedia:"ðŸŒ",contributions:"ðŸŒ",linkedin:"ðŸ’¼"},o={saved:"Article Read",bluesky:"Posts",pixelfed:"Photo",hackernews:"Comment",posts:"Posts",wikipedia:"Contributions",contributions:"Contributions",linkedin:"LinkedIn"},i=a[s]||"",c=o[s]||s.toUpperCase();ye.textContent=`${i} ${c}`,be.textContent=n,we(t.getBoundingClientRect()),g.removeAttribute("hidden")}function Ee(){g.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(t=>{const e=t;e.addEventListener("mouseenter",()=>ve(e)),e.addEventListener("mouseleave",Ee)});const X=ee.get("id");X&&oe(X);

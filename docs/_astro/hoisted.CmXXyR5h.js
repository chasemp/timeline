import"./hoisted.BScVxmeO.js";const _=document.getElementById("theme-toggle"),v=_?.querySelector(".theme-icon"),A=document.documentElement;function Q(e,t,a=365){const n=new Date;n.setTime(n.getTime()+a*24*60*60*1e3),document.cookie=`${e}=${t};expires=${n.toUTCString()};path=/;domain=.523.life`}function X(e){const t=e+"=",a=document.cookie.split(";");for(let n=0;n<a.length;n++){let o=a[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null}const R=X("theme")||"dark";A.setAttribute("data-theme",R);v&&(v.textContent=R==="dark"?"☀️":"🌙");_?.addEventListener("click",()=>{const t=A.getAttribute("data-theme")==="dark"?"light":"dark";A.setAttribute("data-theme",t),Q("theme",t),v&&(v.textContent=t==="dark"?"☀️":"🌙")});window.addEventListener("DOMContentLoaded",()=>{if(window.PagefindUI)new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}});else{const e=document.getElementById("search-container");e&&(e.innerHTML='<div style="padding: 10px; color: var(--muted); font-size: 14px; text-align: center;">Search available in production build</div>')}});const p=new URLSearchParams(location.search),J=new Set((p.get("types")??"blog,saved,bluesky,release,wikipedia").split(",").filter(Boolean)),S=document.querySelectorAll('input[name="type"]');S.forEach(e=>{e.checked=J.has(e.value),e.addEventListener("change",f)});function f(){const e=Array.from(S).filter(t=>t.checked).map(t=>t.value);e.length===0?p.delete("types"):p.set("types",e.join(",")),history.replaceState({},"",p.toString()?`?${p.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:e}}))}const i=new Set,l=document.getElementById("hashtag-dropdown-btn"),b=document.getElementById("hashtag-dropdown-menu"),k=document.getElementById("selected-hashtag-count"),C=document.querySelectorAll('.hashtag-option input[type="checkbox"]');function z(e){return{"#blog":"blog","#article":"saved","#bluesky":"bluesky","#wikipedia":"wikipedia","#release":"release"}[e]||null}document.getElementById("select-all")?.addEventListener("click",()=>{S.forEach(e=>e.checked=!0),f()});document.getElementById("select-none")?.addEventListener("click",()=>{S.forEach(t=>t.checked=!1),C.forEach(t=>t.checked=!1),i.clear(),I();const e=document.querySelector(".pagefind-ui__search-input");e&&(e.value="",e.dispatchEvent(new Event("input",{bubbles:!0}))),f()});function I(){document.dispatchEvent(new CustomEvent("hashtag:changed",{detail:{hashtags:Array.from(i)}})),i.size>0?(k.textContent=i.size.toString(),k.removeAttribute("hidden")):k.setAttribute("hidden","")}l?.addEventListener("click",e=>{e.stopPropagation(),l.getAttribute("aria-expanded")==="true"?(b?.setAttribute("hidden",""),l.setAttribute("aria-expanded","false")):(b?.removeAttribute("hidden"),l.setAttribute("aria-expanded","true"))});C.forEach(e=>{e.addEventListener("change",()=>{const t=e.dataset.hashtag;if(e.checked){i.add(t);const a=z(t);if(a){const n=document.querySelector(`input[name="type"][value="${a}"]`);n&&!n.checked&&(n.checked=!0,f())}}else i.delete(t);I(),B()})});window.addEventListener("hashtag:click",e=>{const t=e.detail.tag;if(i.has(t))i.delete(t);else{i.add(t);const n=z(t);if(n){const o=document.querySelector(`input[name="type"][value="${n}"]`);o&&!o.checked&&(o.checked=!0,f())}}const a=Array.from(C).find(n=>n.dataset.hashtag===t);a&&(a.checked=i.has(t)),I(),B(),i.has(t)&&(l?.classList.add("flash-notification"),setTimeout(()=>l?.classList.remove("flash-notification"),600))});function B(){document.querySelectorAll(".card-hashtag").forEach(e=>{const t=e.dataset.hashtag;t&&i.has(t)?e.classList.add("hashtag-selected"):e.classList.remove("hashtag-selected")})}B();document.addEventListener("click",e=>{!l?.contains(e.target)&&!b?.contains(e.target)&&(b?.setAttribute("hidden",""),l?.setAttribute("aria-expanded","false"))});const F=new URLSearchParams(location.search),D=(F.get("types")??"").split(",").filter(Boolean);let y=new Set;const H=document.getElementById("empty-state"),P=document.querySelector(".list"),U=document.getElementById("current-date"),K=document.getElementById("reset-machine");U&&(U.textContent=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}));K?.addEventListener("click",e=>{e.preventDefault(),window.location.href=window.location.pathname});function j(){Array.from(document.querySelectorAll(".row:not(.today-marker)")).filter(t=>t.style.display!=="none").length===0?(H?.removeAttribute("hidden"),P?.setAttribute("hidden","")):(H?.setAttribute("hidden",""),P?.removeAttribute("hidden"))}function N(){const e=new Set(D.length?D:Array.from(document.querySelectorAll('input[name="type"]')).map(t=>t.value));document.querySelectorAll(".row").forEach(t=>{const a=t.dataset.type,n=t.dataset.hashtags?.split(",").filter(Boolean)||[],o=e.size===0?!1:e.has(a),s=y.size===0||n.some(r=>y.has(r));t.style.display=o&&s?"":"none"}),j()}N();document.addEventListener("filters:changed",e=>{const t=new Set(e.detail.types.length?e.detail.types:[]);document.querySelectorAll(".row").forEach(a=>{const n=a.dataset.type,o=a.dataset.hashtags?.split(",").filter(Boolean)||[],s=t.size===0?!1:t.has(n),r=y.size===0||o.some(d=>y.has(d));a.style.display=s&&r?"":"none"}),j()});document.addEventListener("hashtag:changed",e=>{y=new Set(e.detail.hashtags),N()});const c=document.getElementById("detail-panel"),u=document.getElementById("panel-content"),O=document.getElementById("panel-title-text"),T=document.getElementById("panel-source-wrapper"),V=document.getElementById("panel-source"),w=document.getElementById("panel-close"),$=document.getElementById("panel-backdrop"),x=document.getElementById("swipe-indicator"),h=()=>window.innerWidth<=980;let g=u.innerHTML;(!g||g.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{g=u.innerHTML},100));function W(e=!0){e&&h()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function Z(e){try{const a=await(await fetch(e)).text(),o=new DOMParser().parseFromString(a,"text/html"),s=o.querySelector("article")||o.querySelector("main")||o.querySelector(".content");return s?s.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function G(e){const t=window.__TIMELINE__.find(s=>s.id===e);if(!t)return;h()?($.removeAttribute("hidden"),c.classList.add("mobile-open"),w.removeAttribute("hidden"),x.removeAttribute("hidden"),W(!0)):(w.setAttribute("hidden",""),x.setAttribute("hidden",""));const a=t.type==="saved"?"Article Read":t.type.toUpperCase();O.textContent=`${a} · ${new Date(t.timestamp).toLocaleString()}`,t.url?(V.href=t.url,T.removeAttribute("hidden")):T.setAttribute("hidden",""),u.innerHTML="<p>Loading...</p>";let n="";if(t.type==="blog"){const s=`/blog/${t.id.replace("blog:","")}`,r=await Z(s);n=`<h3 class="detail-title">${t.title||""}</h3>
        <div class="detail-content">${r}</div>`}else{let s="";if(t.type==="saved"){const d=[];t.metadata?.site_name&&d.push(`📰 ${t.metadata.site_name}`),t.author&&d.push(`✍️ ${t.author}`),t.metadata?.reading_time&&d.push(`⏱️ ${t.metadata.reading_time}`),d.length>0&&(s=`<div class="detail-metadata">${d.join(" • ")}</div>`)}const r=t.content_html||`<p>${t.summary||""}</p>`;n=`<h3 class="detail-title">${t.title||""}</h3>
        <div class="detail-content">${r}${s}</div>`}u.innerHTML=n;const o=new URLSearchParams(location.search);o.set("id",e),history.replaceState({},"",`?${o.toString()}`)}function L(){h()&&($.setAttribute("hidden",""),c.classList.remove("mobile-open"),x.setAttribute("hidden",""),W(!1)),O.textContent="About",T.setAttribute("hidden",""),u.innerHTML=g,w.setAttribute("hidden","");const e=new URLSearchParams(location.search);e.delete("id"),history.replaceState({},"",`?${e.toString()}`)}w.addEventListener("click",L);$.addEventListener("click",L);document.addEventListener("keydown",e=>{e.key==="Escape"&&(h()?c.classList.contains("mobile-open"):u.innerHTML!==g)&&L()});let M=0,q=0,E=!1;c.addEventListener("touchstart",e=>{!h()||!c.classList.contains("mobile-open")||(M=e.touches[0].clientY,q=Date.now(),E=!1)},{passive:!0});c.addEventListener("touchmove",e=>{if(!h()||!c.classList.contains("mobile-open"))return;const a=e.touches[0].clientY-M,n=Date.now()-q;if(a>50&&n<500){E=!0;const o=Math.min(a*.3,100);c.style.transform=`translateY(${o}px)`}},{passive:!0});c.addEventListener("touchend",e=>{if(!h()||!c.classList.contains("mobile-open"))return;const a=e.changedTouches[0].clientY-M,n=Date.now()-q;c.style.transform="",E&&a>100&&n<500&&L(),E=!1},{passive:!0});document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),G(e.dataset.id)})});const m=document.getElementById("tooltip"),ee=m.querySelector(".tooltip-title"),te=m.querySelector(".tooltip-meta");function ne(e){const a=Math.min(window.innerHeight-80,Math.max(0,e.top+window.scrollY+10)),n=Math.min(window.innerWidth-380,Math.max(0,e.left+window.scrollX+10));m.style.top=`${a}px`,m.style.left=`${n}px`}function ae(e){const t=e.dataset.timestamp,a=e.dataset.dotType,n=new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),o={blog:"📝",saved:"🔖",bluesky:"🦋",posts:"🦋",release:"🏷️",wikipedia:"🌐",contributions:"🌐"},s={saved:"Article Read",bluesky:"Posts",posts:"Posts",wikipedia:"Contributions",contributions:"Contributions"},r=o[a]||"",d=s[a]||a.toUpperCase();ee.textContent=`${r} ${d}`,te.textContent=n,ne(e.getBoundingClientRect()),m.removeAttribute("hidden")}function oe(){m.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(e=>{const t=e;t.addEventListener("mouseenter",()=>ae(t)),t.addEventListener("mouseleave",oe)});const Y=F.get("id");Y&&G(Y);

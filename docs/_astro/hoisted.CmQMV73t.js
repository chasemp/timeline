import"./hoisted.BScVxmeO.js";const L=document.getElementById("theme-toggle"),d=L?.querySelector(".theme-icon"),y=document.documentElement,k=localStorage.getItem("theme")||"light";y.setAttribute("data-theme",k);d&&(d.textContent=k==="dark"?"☀️":"🌙");L?.addEventListener("click",()=>{const t=y.getAttribute("data-theme")==="dark"?"light":"dark";y.setAttribute("data-theme",t),localStorage.setItem("theme",t),d&&(d.textContent=t==="dark"?"☀️":"🌙")});window.addEventListener("DOMContentLoaded",()=>{new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}})});const s=new URLSearchParams(location.search),B=new Set((s.get("types")??"blog,saved,bluesky,release,wikipedia").split(",").filter(Boolean)),p=document.querySelectorAll('input[name="type"]');p.forEach(e=>{e.checked=B.has(e.value),e.addEventListener("change",f)});function f(){const e=Array.from(p).filter(t=>t.checked).map(t=>t.value);e.length===0?s.delete("types"):s.set("types",e.join(",")),history.replaceState({},"",s.toString()?`?${s.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:e}}))}document.getElementById("select-all")?.addEventListener("click",()=>{p.forEach(e=>e.checked=!0),f()});document.getElementById("select-none")?.addEventListener("click",()=>{p.forEach(e=>e.checked=!1),f()});const A=new URLSearchParams(location.search),v=(A.get("types")??"").split(",").filter(Boolean);function $(){const e=new Set(v.length?v:Array.from(document.querySelectorAll('input[name="type"]')).map(t=>t.value));document.querySelectorAll(".row").forEach(t=>{const n=t.dataset.type;t.style.display=e.has(n)?"":"none"})}$();document.addEventListener("filters:changed",e=>{const t=new Set(e.detail.types.length?e.detail.types:[]);document.querySelectorAll(".row").forEach(n=>{const o=n.dataset.type;n.style.display=t.size===0?"none":t.has(o)?"":"none"})});const w=document.getElementById("detail-panel"),c=document.getElementById("panel-content"),T=document.getElementById("panel-title-text"),g=document.getElementById("panel-source-wrapper"),C=document.getElementById("panel-source"),m=document.getElementById("panel-close"),E=document.getElementById("panel-backdrop"),u=()=>window.innerWidth<=980;let r=c.innerHTML;(!r||r.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{r=c.innerHTML},100));function I(e=!0){e&&u()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function q(e){try{const n=await(await fetch(e)).text(),a=new DOMParser().parseFromString(n,"text/html"),l=a.querySelector("article")||a.querySelector("main")||a.querySelector(".content");return l?l.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function M(e){const t=window.__TIMELINE__.find(l=>l.id===e);if(!t)return;u()?(E.removeAttribute("hidden"),w.classList.add("mobile-open"),m.removeAttribute("hidden"),I(!0)):m.setAttribute("hidden","");const n=t.type==="saved"?"Article Read":t.type.toUpperCase();T.textContent=`${n} · ${new Date(t.timestamp).toLocaleString()}`,t.url?(C.href=t.url,g.removeAttribute("hidden")):g.setAttribute("hidden",""),c.innerHTML="<p>Loading...</p>";let o="";if(t.type==="blog"){const l=`/blog/${t.id.replace("blog:","")}`,h=await q(l);o=`<h3 class="detail-title">${t.title||""}</h3>
        <div class="detail-content">${h}</div>`}else o=`<h3 class="detail-title">${t.title||""}</h3>
        <div class="detail-content">${t.content_html||`<p>${t.summary||""}</p>`}</div>`;c.innerHTML=o;const a=new URLSearchParams(location.search);a.set("id",e),history.replaceState({},"",`?${a.toString()}`)}function S(){u()&&(E.setAttribute("hidden",""),w.classList.remove("mobile-open"),I(!1)),T.textContent="About",g.setAttribute("hidden",""),c.innerHTML=r,m.setAttribute("hidden","");const e=new URLSearchParams(location.search);e.delete("id"),history.replaceState({},"",`?${e.toString()}`)}m.addEventListener("click",S);E.addEventListener("click",S);document.addEventListener("keydown",e=>{e.key==="Escape"&&(u()?w.classList.contains("mobile-open"):c.innerHTML!==r)&&S()});document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),M(e.dataset.id)})});const i=document.getElementById("tooltip"),P=i.querySelector(".tooltip-title"),U=i.querySelector(".tooltip-meta");function D(e){const n=Math.min(window.innerHeight-80,Math.max(0,e.top+window.scrollY+10)),o=Math.min(window.innerWidth-380,Math.max(0,e.left+window.scrollX+10));i.style.top=`${n}px`,i.style.left=`${o}px`}function H(e){const t=e.dataset.timestamp,n=e.dataset.dotType,o=new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),a={blog:"📝",saved:"🔖",bluesky:"🦋",release:"🏷️",wikipedia:"🌐"},l={saved:"Article Read"},h=a[n]||"",x=l[n]||n.toUpperCase();P.textContent=`${h} ${x}`,U.textContent=o,D(e.getBoundingClientRect()),i.removeAttribute("hidden")}function R(){i.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(e=>{const t=e;t.addEventListener("mouseenter",()=>H(t)),t.addEventListener("mouseleave",R)});const b=A.get("id");b&&M(b);

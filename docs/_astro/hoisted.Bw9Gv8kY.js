import"./hoisted.BScVxmeO.js";const H=document.getElementById("theme-toggle"),g=H?.querySelector(".theme-icon"),b=document.documentElement;function N(t,e,n=365){const a=new Date;a.setTime(a.getTime()+n*24*60*60*1e3),document.cookie=`${t}=${e};expires=${a.toUTCString()};path=/;domain=.523.life`}function O(t){const e=t+"=",n=document.cookie.split(";");for(let a=0;a<n.length;a++){let o=n[a];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(e)===0)return o.substring(e.length,o.length)}return null}const P=O("theme")||"dark";b.setAttribute("data-theme",P);g&&(g.textContent=P==="dark"?"☀️":"🌙");H?.addEventListener("click",()=>{const e=b.getAttribute("data-theme")==="dark"?"light":"dark";b.setAttribute("data-theme",e),N("theme",e),g&&(g.textContent=e==="dark"?"☀️":"🌙")});window.addEventListener("DOMContentLoaded",()=>{if(window.PagefindUI)new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}});else{const t=document.getElementById("search-container");t&&(t.innerHTML='<div style="padding: 10px; color: var(--muted); font-size: 14px; text-align: center;">Search available in production build</div>')}});const m=new URLSearchParams(location.search),W=new Set((m.get("types")??"blog,saved,bluesky,release,wikipedia").split(",").filter(Boolean)),w=document.querySelectorAll('input[name="type"]');w.forEach(t=>{t.checked=W.has(t.value),t.addEventListener("change",L)});function L(){const t=Array.from(w).filter(e=>e.checked).map(e=>e.value);t.length===0?m.delete("types"):m.set("types",t.join(",")),history.replaceState({},"",m.toString()?`?${m.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:t}}))}const i=new Set,r=document.getElementById("hashtag-dropdown-btn"),y=document.getElementById("hashtag-dropdown-menu"),E=document.getElementById("selected-hashtag-count"),A=document.querySelectorAll('.hashtag-option input[type="checkbox"]');document.getElementById("select-all")?.addEventListener("click",()=>{w.forEach(t=>t.checked=!0),L()});document.getElementById("select-none")?.addEventListener("click",()=>{w.forEach(e=>e.checked=!1),A.forEach(e=>e.checked=!1),i.clear(),k();const t=document.querySelector(".pagefind-ui__search-input");t&&(t.value="",t.dispatchEvent(new Event("input",{bubbles:!0}))),L()});function k(){document.dispatchEvent(new CustomEvent("hashtag:changed",{detail:{hashtags:Array.from(i)}})),i.size>0?(E.textContent=i.size.toString(),E.removeAttribute("hidden")):E.setAttribute("hidden","")}r?.addEventListener("click",t=>{t.stopPropagation(),r.getAttribute("aria-expanded")==="true"?(y?.setAttribute("hidden",""),r.setAttribute("aria-expanded","false")):(y?.removeAttribute("hidden"),r.setAttribute("aria-expanded","true"))});A.forEach(t=>{t.addEventListener("change",()=>{const e=t.dataset.hashtag;t.checked?i.add(e):i.delete(e),k(),x()})});window.addEventListener("hashtag:click",t=>{const e=t.detail.tag;i.has(e)?i.delete(e):i.add(e);const n=Array.from(A).find(a=>a.dataset.hashtag===e);n&&(n.checked=i.has(e)),k(),x(),i.has(e)&&(r?.classList.add("flash-notification"),setTimeout(()=>r?.classList.remove("flash-notification"),600))});function x(){document.querySelectorAll(".card-hashtag").forEach(t=>{const e=t.dataset.hashtag;e&&i.has(e)?t.classList.add("hashtag-selected"):t.classList.remove("hashtag-selected")})}x();document.addEventListener("click",t=>{!r?.contains(t.target)&&!y?.contains(t.target)&&(y?.setAttribute("hidden",""),r?.setAttribute("aria-expanded","false"))});const U=new URLSearchParams(location.search),M=(U.get("types")??"").split(",").filter(Boolean);let p=new Set;const $=document.getElementById("empty-state"),C=document.querySelector(".list"),q=document.getElementById("current-date"),Q=document.getElementById("reset-machine");q&&(q.textContent=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}));Q?.addEventListener("click",t=>{t.preventDefault(),window.location.href=window.location.pathname});function _(){Array.from(document.querySelectorAll(".row:not(.today-marker)")).filter(e=>e.style.display!=="none").length===0?($?.removeAttribute("hidden"),C?.setAttribute("hidden","")):($?.setAttribute("hidden",""),C?.removeAttribute("hidden"))}function R(){const t=new Set(M.length?M:Array.from(document.querySelectorAll('input[name="type"]')).map(e=>e.value));document.querySelectorAll(".row").forEach(e=>{const n=e.dataset.type,a=e.dataset.hashtags?.split(",").filter(Boolean)||[],o=t.has(n),s=p.size===0||a.some(c=>p.has(c));e.style.display=o&&s?"":"none"}),_()}R();document.addEventListener("filters:changed",t=>{const e=new Set(t.detail.types.length?t.detail.types:[]);document.querySelectorAll(".row").forEach(n=>{const a=n.dataset.type,o=n.dataset.hashtags?.split(",").filter(Boolean)||[],s=e.size===0?!1:e.has(a),c=p.size===0||o.some(d=>p.has(d));n.style.display=s&&c?"":"none"}),_()});document.addEventListener("hashtag:changed",t=>{p=new Set(t.detail.hashtags),R()});const B=document.getElementById("detail-panel"),l=document.getElementById("panel-content"),z=document.getElementById("panel-title-text"),S=document.getElementById("panel-source-wrapper"),X=document.getElementById("panel-source"),f=document.getElementById("panel-close"),I=document.getElementById("panel-backdrop"),v=()=>window.innerWidth<=980;let u=l.innerHTML;(!u||u.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{u=l.innerHTML},100));function F(t=!0){t&&v()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function Y(t){try{const n=await(await fetch(t)).text(),o=new DOMParser().parseFromString(n,"text/html"),s=o.querySelector("article")||o.querySelector("main")||o.querySelector(".content");return s?s.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function j(t){const e=window.__TIMELINE__.find(s=>s.id===t);if(!e)return;v()?(I.removeAttribute("hidden"),B.classList.add("mobile-open"),f.removeAttribute("hidden"),F(!0)):f.setAttribute("hidden","");const n=e.type==="saved"?"Article Read":e.type.toUpperCase();z.textContent=`${n} · ${new Date(e.timestamp).toLocaleString()}`,e.url?(X.href=e.url,S.removeAttribute("hidden")):S.setAttribute("hidden",""),l.innerHTML="<p>Loading...</p>";let a="";if(e.type==="blog"){const s=`/blog/${e.id.replace("blog:","")}`,c=await Y(s);a=`<h3 class="detail-title">${e.title||""}</h3>
        <div class="detail-content">${c}</div>`}else{let s="";if(e.type==="saved"){const d=[];e.metadata?.site_name&&d.push(`📰 ${e.metadata.site_name}`),e.author&&d.push(`✍️ ${e.author}`),e.metadata?.reading_time&&d.push(`⏱️ ${e.metadata.reading_time}`),d.length>0&&(s=`<div class="detail-metadata">${d.join(" • ")}</div>`)}const c=e.content_html||`<p>${e.summary||""}</p>`;a=`<h3 class="detail-title">${e.title||""}</h3>
        <div class="detail-content">${c}${s}</div>`}l.innerHTML=a;const o=new URLSearchParams(location.search);o.set("id",t),history.replaceState({},"",`?${o.toString()}`)}function T(){v()&&(I.setAttribute("hidden",""),B.classList.remove("mobile-open"),F(!1)),z.textContent="About",S.setAttribute("hidden",""),l.innerHTML=u,f.setAttribute("hidden","");const t=new URLSearchParams(location.search);t.delete("id"),history.replaceState({},"",`?${t.toString()}`)}f.addEventListener("click",T);I.addEventListener("click",T);document.addEventListener("keydown",t=>{t.key==="Escape"&&(v()?B.classList.contains("mobile-open"):l.innerHTML!==u)&&T()});document.querySelectorAll(".card").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),j(t.dataset.id)})});const h=document.getElementById("tooltip"),G=h.querySelector(".tooltip-title"),J=h.querySelector(".tooltip-meta");function K(t){const n=Math.min(window.innerHeight-80,Math.max(0,t.top+window.scrollY+10)),a=Math.min(window.innerWidth-380,Math.max(0,t.left+window.scrollX+10));h.style.top=`${n}px`,h.style.left=`${a}px`}function V(t){const e=t.dataset.timestamp,n=t.dataset.dotType,a=new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),o={blog:"📝",saved:"🔖",bluesky:"🦋",release:"🏷️",wikipedia:"🌐"},s={saved:"Article Read"},c=o[n]||"",d=s[n]||n.toUpperCase();G.textContent=`${c} ${d}`,J.textContent=a,K(t.getBoundingClientRect()),h.removeAttribute("hidden")}function Z(){h.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(t=>{const e=t;e.addEventListener("mouseenter",()=>V(e)),e.addEventListener("mouseleave",Z)});const D=U.get("id");D&&j(D);

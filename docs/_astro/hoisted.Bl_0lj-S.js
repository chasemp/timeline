import"./hoisted.BScVxmeO.js";const H=document.getElementById("theme-toggle"),g=H?.querySelector(".theme-icon"),b=document.documentElement,P=localStorage.getItem("theme")||"light";b.setAttribute("data-theme",P);g&&(g.textContent=P==="dark"?"â˜€ï¸":"ðŸŒ™");H?.addEventListener("click",()=>{const e=b.getAttribute("data-theme")==="dark"?"light":"dark";b.setAttribute("data-theme",e),localStorage.setItem("theme",e),g&&(g.textContent=e==="dark"?"â˜€ï¸":"ðŸŒ™")});window.addEventListener("DOMContentLoaded",()=>{new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}})});const m=new URLSearchParams(location.search),N=new Set((m.get("types")??"blog,saved,bluesky,release,wikipedia").split(",").filter(Boolean)),w=document.querySelectorAll('input[name="type"]');w.forEach(t=>{t.checked=N.has(t.value),t.addEventListener("change",L)});function L(){const t=Array.from(w).filter(e=>e.checked).map(e=>e.value);t.length===0?m.delete("types"):m.set("types",t.join(",")),history.replaceState({},"",m.toString()?`?${m.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:t}}))}const i=new Set,l=document.getElementById("hashtag-dropdown-btn"),y=document.getElementById("hashtag-dropdown-menu"),E=document.getElementById("selected-hashtag-count"),A=document.querySelectorAll('.hashtag-option input[type="checkbox"]');document.getElementById("select-all")?.addEventListener("click",()=>{w.forEach(t=>t.checked=!0),L()});document.getElementById("select-none")?.addEventListener("click",()=>{w.forEach(e=>e.checked=!1),A.forEach(e=>e.checked=!1),i.clear(),k();const t=document.querySelector(".pagefind-ui__search-input");t&&(t.value="",t.dispatchEvent(new Event("input",{bubbles:!0}))),L()});function k(){document.dispatchEvent(new CustomEvent("hashtag:changed",{detail:{hashtags:Array.from(i)}})),i.size>0?(E.textContent=i.size.toString(),E.removeAttribute("hidden")):E.setAttribute("hidden","")}l?.addEventListener("click",t=>{t.stopPropagation(),l.getAttribute("aria-expanded")==="true"?(y?.setAttribute("hidden",""),l.setAttribute("aria-expanded","false")):(y?.removeAttribute("hidden"),l.setAttribute("aria-expanded","true"))});A.forEach(t=>{t.addEventListener("change",()=>{const e=t.dataset.hashtag;t.checked?i.add(e):i.delete(e),k(),I()})});window.addEventListener("hashtag:click",t=>{const e=t.detail.tag;i.has(e)?i.delete(e):i.add(e);const n=Array.from(A).find(o=>o.dataset.hashtag===e);n&&(n.checked=i.has(e)),k(),I(),i.has(e)&&(l?.classList.add("flash-notification"),setTimeout(()=>l?.classList.remove("flash-notification"),600))});function I(){document.querySelectorAll(".card-hashtag").forEach(t=>{const e=t.dataset.hashtag;e&&i.has(e)?t.classList.add("hashtag-selected"):t.classList.remove("hashtag-selected")})}I();document.addEventListener("click",t=>{!l?.contains(t.target)&&!y?.contains(t.target)&&(y?.setAttribute("hidden",""),l?.setAttribute("aria-expanded","false"))});const U=new URLSearchParams(location.search),T=(U.get("types")??"").split(",").filter(Boolean);let p=new Set;const $=document.getElementById("empty-state"),C=document.querySelector(".list"),q=document.getElementById("current-date"),W=document.getElementById("reset-machine");q&&(q.textContent=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}));W?.addEventListener("click",t=>{t.preventDefault(),window.location.href=window.location.pathname});function _(){Array.from(document.querySelectorAll(".row:not(.today-marker)")).filter(e=>e.style.display!=="none").length===0?($?.removeAttribute("hidden"),C?.setAttribute("hidden","")):($?.setAttribute("hidden",""),C?.removeAttribute("hidden"))}function R(){const t=new Set(T.length?T:Array.from(document.querySelectorAll('input[name="type"]')).map(e=>e.value));document.querySelectorAll(".row").forEach(e=>{const n=e.dataset.type,o=e.dataset.hashtags?.split(",").filter(Boolean)||[],s=t.has(n),a=p.size===0||o.some(c=>p.has(c));e.style.display=s&&a?"":"none"}),_()}R();document.addEventListener("filters:changed",t=>{const e=new Set(t.detail.types.length?t.detail.types:[]);document.querySelectorAll(".row").forEach(n=>{const o=n.dataset.type,s=n.dataset.hashtags?.split(",").filter(Boolean)||[],a=e.size===0?!1:e.has(o),c=p.size===0||s.some(d=>p.has(d));n.style.display=a&&c?"":"none"}),_()});document.addEventListener("hashtag:changed",t=>{p=new Set(t.detail.hashtags),R()});const B=document.getElementById("detail-panel"),r=document.getElementById("panel-content"),z=document.getElementById("panel-title-text"),S=document.getElementById("panel-source-wrapper"),O=document.getElementById("panel-source"),f=document.getElementById("panel-close"),x=document.getElementById("panel-backdrop"),v=()=>window.innerWidth<=980;let u=r.innerHTML;(!u||u.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{u=r.innerHTML},100));function F(t=!0){t&&v()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function X(t){try{const n=await(await fetch(t)).text(),s=new DOMParser().parseFromString(n,"text/html"),a=s.querySelector("article")||s.querySelector("main")||s.querySelector(".content");return a?a.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function j(t){const e=window.__TIMELINE__.find(a=>a.id===t);if(!e)return;v()?(x.removeAttribute("hidden"),B.classList.add("mobile-open"),f.removeAttribute("hidden"),F(!0)):f.setAttribute("hidden","");const n=e.type==="saved"?"Article Read":e.type.toUpperCase();z.textContent=`${n} Â· ${new Date(e.timestamp).toLocaleString()}`,e.url?(O.href=e.url,S.removeAttribute("hidden")):S.setAttribute("hidden",""),r.innerHTML="<p>Loading...</p>";let o="";if(e.type==="blog"){const a=`/blog/${e.id.replace("blog:","")}`,c=await X(a);o=`<h3 class="detail-title">${e.title||""}</h3>
        <div class="detail-content">${c}</div>`}else{let a="";if(e.type==="saved"){const d=[];e.metadata?.site_name&&d.push(`ðŸ“° ${e.metadata.site_name}`),e.author&&d.push(`âœï¸ ${e.author}`),e.metadata?.reading_time&&d.push(`â±ï¸ ${e.metadata.reading_time}`),d.length>0&&(a=`<div class="detail-metadata">${d.join(" â€¢ ")}</div>`)}const c=e.content_html||`<p>${e.summary||""}</p>`;o=`<h3 class="detail-title">${e.title||""}</h3>
        <div class="detail-content">${c}${a}</div>`}r.innerHTML=o;const s=new URLSearchParams(location.search);s.set("id",t),history.replaceState({},"",`?${s.toString()}`)}function M(){v()&&(x.setAttribute("hidden",""),B.classList.remove("mobile-open"),F(!1)),z.textContent="About",S.setAttribute("hidden",""),r.innerHTML=u,f.setAttribute("hidden","");const t=new URLSearchParams(location.search);t.delete("id"),history.replaceState({},"",`?${t.toString()}`)}f.addEventListener("click",M);x.addEventListener("click",M);document.addEventListener("keydown",t=>{t.key==="Escape"&&(v()?B.classList.contains("mobile-open"):r.innerHTML!==u)&&M()});document.querySelectorAll(".card").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),j(t.dataset.id)})});const h=document.getElementById("tooltip"),Y=h.querySelector(".tooltip-title"),G=h.querySelector(".tooltip-meta");function J(t){const n=Math.min(window.innerHeight-80,Math.max(0,t.top+window.scrollY+10)),o=Math.min(window.innerWidth-380,Math.max(0,t.left+window.scrollX+10));h.style.top=`${n}px`,h.style.left=`${o}px`}function K(t){const e=t.dataset.timestamp,n=t.dataset.dotType,o=new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),s={blog:"ðŸ“",saved:"ðŸ”–",bluesky:"ðŸ¦‹",release:"ðŸ·ï¸",wikipedia:"ðŸŒ"},a={saved:"Article Read"},c=s[n]||"",d=a[n]||n.toUpperCase();Y.textContent=`${c} ${d}`,G.textContent=o,J(t.getBoundingClientRect()),h.removeAttribute("hidden")}function Q(){h.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(t=>{const e=t;e.addEventListener("mouseenter",()=>K(e)),e.addEventListener("mouseleave",Q)});const D=U.get("id");D&&j(D);

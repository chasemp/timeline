import"./hoisted.BScVxmeO.js";const F=document.getElementById("theme-toggle"),S=F?.querySelector(".theme-icon"),C=document.documentElement;function Z(e,t,s=365){const n=new Date;n.setTime(n.getTime()+s*24*60*60*1e3),document.cookie=`${e}=${t};expires=${n.toUTCString()};path=/;domain=.523.life`}function J(e){const t=e+"=",s=document.cookie.split(";");for(let n=0;n<s.length;n++){let a=s[n];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null}const O=J("theme")||"dark";C.setAttribute("data-theme",O);S&&(S.textContent=O==="dark"?"☀️":"🌙");F?.addEventListener("click",()=>{const t=C.getAttribute("data-theme")==="dark"?"light":"dark";C.setAttribute("data-theme",t),Z("theme",t),S&&(S.textContent=t==="dark"?"☀️":"🌙")});window.addEventListener("DOMContentLoaded",()=>{if(window.PagefindUI)new window.PagefindUI({element:"#search-container",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"Search timeline..."}});else{const e=document.getElementById("search-container");e&&(e.innerHTML='<div style="padding: 10px; color: var(--muted); font-size: 14px; text-align: center;">Search available in production build</div>')}});const y=new URLSearchParams(location.search),K=new Set((y.get("types")??"blog,saved,bluesky,pixelfed,release,wikipedia").split(",").filter(Boolean)),p=document.querySelectorAll('input[name="type"]');function T(e){return e.split(",").filter(Boolean)}function ee(e){return T(e).some(s=>K.has(s))}p.forEach(e=>{e.checked=ee(e.value),e.addEventListener("change",w)});function w(){const e=new Set;Array.from(p).filter(s=>s.checked).forEach(s=>{T(s.value).forEach(n=>e.add(n))});const t=Array.from(e);t.length===0?y.delete("types"):y.set("types",t.join(",")),history.replaceState({},"",y.toString()?`?${y.toString()}`:location.pathname),document.dispatchEvent(new CustomEvent("filters:changed",{detail:{types:t}}))}const r=new Set,d=document.getElementById("hashtag-dropdown-btn"),A=document.getElementById("hashtag-dropdown-menu"),x=document.getElementById("selected-hashtag-count"),M=document.querySelectorAll('.hashtag-option input[type="checkbox"]');function j(e){return{"#blog":["blog"],"#article":["saved"],"#bluesky":["bluesky","pixelfed"],"#pixelfed":["bluesky","pixelfed"],"#wikipedia":["wikipedia"],"#release":["release"]}[e]||[]}document.getElementById("select-all")?.addEventListener("click",()=>{p.forEach(e=>e.checked=!0),w()});document.getElementById("select-none")?.addEventListener("click",()=>{p.forEach(t=>t.checked=!1),M.forEach(t=>t.checked=!1),r.clear(),$();const e=document.querySelector(".pagefind-ui__search-input");e&&(e.value="",e.dispatchEvent(new Event("input",{bubbles:!0}))),w()});function $(){document.dispatchEvent(new CustomEvent("hashtag:changed",{detail:{hashtags:Array.from(r)}})),r.size>0?(x.textContent=r.size.toString(),x.removeAttribute("hidden")):x.setAttribute("hidden","")}d?.addEventListener("click",e=>{e.stopPropagation(),d.getAttribute("aria-expanded")==="true"?(A?.setAttribute("hidden",""),d.setAttribute("aria-expanded","false")):(A?.removeAttribute("hidden"),d.setAttribute("aria-expanded","true"))});M.forEach(e=>{e.addEventListener("change",()=>{const t=e.dataset.hashtag;if(e.checked){r.add(t);const s=j(t);if(s.length>0){let n=!1;p.forEach(a=>{T(a.value).some(c=>s.includes(c))&&!a.checked&&(a.checked=!0,n=!0)}),n&&w()}}else r.delete(t);$(),D()})});window.addEventListener("hashtag:click",e=>{const t=e.detail.tag;if(r.has(t))r.delete(t);else{r.add(t);const n=j(t);if(n.length>0){let a=!1;p.forEach(o=>{T(o.value).some(i=>n.includes(i))&&!o.checked&&(o.checked=!0,a=!0)}),a&&w()}}const s=Array.from(M).find(n=>n.dataset.hashtag===t);s&&(s.checked=r.has(t)),$(),D(),r.has(t)&&(d?.classList.add("flash-notification"),setTimeout(()=>d?.classList.remove("flash-notification"),600))});function D(){document.querySelectorAll(".card-hashtag").forEach(e=>{const t=e.dataset.hashtag;t&&r.has(t)?e.classList.add("hashtag-selected"):e.classList.remove("hashtag-selected")})}D();document.addEventListener("click",e=>{!d?.contains(e.target)&&!A?.contains(e.target)&&(A?.setAttribute("hidden",""),d?.setAttribute("aria-expanded","false"))});const N=new URLSearchParams(location.search),P=(N.get("types")??"").split(",").filter(Boolean);let v=new Set;const U=document.getElementById("empty-state"),Y=document.querySelector(".list"),R=document.getElementById("current-date"),te=document.getElementById("reset-machine");R&&(R.textContent=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}));te?.addEventListener("click",e=>{e.preventDefault(),window.location.href=window.location.pathname});function ne(e){const t=new Date(e),s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${s}/${n}/${a}`}function V(){Array.from(document.querySelectorAll(".row:not(.today-marker)")).filter(t=>t.style.display!=="none").length===0?(U?.removeAttribute("hidden"),Y?.setAttribute("hidden","")):(U?.setAttribute("hidden",""),Y?.removeAttribute("hidden"))}function G(){const t=Array.from(document.querySelectorAll('input[name="type"]')).map(n=>n.value).flatMap(n=>n.split(",").filter(Boolean)),s=new Set(P.length?P:t);document.querySelectorAll(".row").forEach(n=>{const a=n.dataset.type,o=n.dataset.hashtags?.split(",").filter(Boolean)||[],c=s.size===0?!1:s.has(a),i=v.size===0||o.some(g=>v.has(g));n.style.display=c&&i?"":"none"}),V()}G();document.addEventListener("filters:changed",e=>{const t=new Set(e.detail.types.length?e.detail.types:[]);document.querySelectorAll(".row").forEach(s=>{const n=s.dataset.type,a=s.dataset.hashtags?.split(",").filter(Boolean)||[],o=t.size===0?!1:t.has(n),c=v.size===0||a.some(i=>v.has(i));s.style.display=o&&c?"":"none"}),V()});document.addEventListener("hashtag:changed",e=>{v=new Set(e.detail.hashtags),G()});const l=document.getElementById("detail-panel"),u=document.getElementById("panel-content"),Q=document.getElementById("panel-title-text"),B=document.getElementById("panel-source-wrapper"),se=document.getElementById("panel-source"),L=document.getElementById("panel-close"),ae=document.getElementById("panel-close-left"),q=document.getElementById("panel-backdrop"),I=document.getElementById("swipe-indicator"),h=()=>window.innerWidth<=980;let b=u.innerHTML;(!b||b.trim()==="")&&(console.warn("Panel intro content is empty, attempting to restore..."),setTimeout(()=>{b=u.innerHTML},100));function W(e=!0){e&&h()?document.body.style.overflow="hidden":document.body.style.overflow=""}async function oe(e){try{const s=await(await fetch(e)).text(),a=new DOMParser().parseFromString(s,"text/html"),o=a.querySelector("article")||a.querySelector("main")||a.querySelector(".content");return o?o.innerHTML:"<p>Unable to load content</p>"}catch{return"<p>Error loading content</p>"}}async function X(e){const t=window.__TIMELINE__.find(i=>i.id===e);if(!t)return;h()?(q.removeAttribute("hidden"),l.classList.add("mobile-open"),L.removeAttribute("hidden"),I.removeAttribute("hidden"),W(!0)):(L.setAttribute("hidden",""),I.setAttribute("hidden",""));const s=t.type==="saved"?"Article Read":t.type.toUpperCase(),n=ne(t.timestamp);Q.textContent=`${s} · ${n}`,t.url?(se.href=t.url,B.removeAttribute("hidden")):B.setAttribute("hidden",""),u.innerHTML="<p>Loading...</p>";let a="";if(t.type==="blog"){const i=`/blog/${t.id.replace("blog:","")}`,g=await oe(i);a=`<h3 class="detail-title">${t.title||""}</h3>
        <div class="detail-content">${g}</div>`}else{let i="";if(t.type==="saved"){const f=[];t.metadata?.site_name&&f.push(`📰 ${t.metadata.site_name}`),t.author&&f.push(`✍️ ${t.author}`),t.metadata?.reading_time&&f.push(`⏱️ ${t.metadata.reading_time}`),f.length>0&&(i=`<div class="detail-metadata">${f.join(" • ")}</div>`)}const g=t.content_html||(t.summary?`<p>${t.summary}</p>`:"");a=`${t.title?`<h3 class="detail-title">${t.title}</h3>`:""}
        <div class="detail-content">${g}${i}</div>`}const o=ce(t);o||(a+=`
        <div class="panel-comments">
          <div class="giscus" id="giscus-${e}"></div>
        </div>
      `),u.innerHTML=a,o||ie(e);const c=new URLSearchParams(location.search);c.set("id",e),history.replaceState({},"",`?${c.toString()}`)}function ie(e){const t=document.querySelector('script[src="https://giscus.app/client.js"]');t&&t.remove();const s=document.getElementById(`giscus-${e}`);if(!s)return;const n=document.createElement("script");n.src="https://giscus.app/client.js",n.setAttribute("data-repo","chasemp/timeline"),n.setAttribute("data-repo-id","R_kgDOQDOMbA"),n.setAttribute("data-category","Ideas"),n.setAttribute("data-category-id","DIC_kwDOQDOMbM4CxLZb"),n.setAttribute("data-mapping","specific"),n.setAttribute("data-term",e),n.setAttribute("data-strict","0"),n.setAttribute("data-reactions-enabled","1"),n.setAttribute("data-emit-metadata","0"),n.setAttribute("data-input-position","bottom"),n.setAttribute("data-theme","/giscus-custom.css"),n.setAttribute("data-lang","en"),n.setAttribute("crossorigin","anonymous"),n.async=!0,n.onerror=()=>{const a=s.closest(".panel-comments");a&&(a.style.display="none")},document.body.appendChild(n),setTimeout(()=>{if(s.innerHTML.trim()===""){const a=s.closest(".panel-comments");a&&(a.style.display="none")}},1e4)}function E(){h()&&(q.setAttribute("hidden",""),l.classList.remove("mobile-open"),I.setAttribute("hidden",""),W(!1));const e=document.querySelector('script[src="https://giscus.app/client.js"]');e&&e.remove(),u.querySelectorAll(".giscus").forEach(n=>n.innerHTML=""),Q.textContent="About",B.setAttribute("hidden",""),u.innerHTML=b,L.setAttribute("hidden","");const s=new URLSearchParams(location.search);s.delete("id"),history.replaceState({},"",`?${s.toString()}`)}function ce(e){if(window.__CONFIG__?.commentsEnabled===!1)return!0;const n=(e.hashtags||[]).some(c=>c.toLowerCase()==="#nocomments"||c.toLowerCase()==="#nc"),o=(e.tags||[]).some(c=>{const i=c.toLowerCase().replace(/\s+/g,"_");return i==="nocomments"||i==="nc"});return n||o}L.addEventListener("click",E);ae.addEventListener("click",E);q.addEventListener("click",E);document.addEventListener("keydown",e=>{e.key==="Escape"&&(h()?l.classList.contains("mobile-open"):u.innerHTML!==b)&&E()});let H=0,_=0,k=!1;l.addEventListener("touchstart",e=>{!h()||!l.classList.contains("mobile-open")||(H=e.touches[0].clientY,_=Date.now(),k=!1)},{passive:!0});l.addEventListener("touchmove",e=>{if(!h()||!l.classList.contains("mobile-open"))return;const s=e.touches[0].clientY-H,n=Date.now()-_;if(s>50&&n<500){k=!0;const a=Math.min(s*.3,100);l.style.transform=`translateY(${a}px)`}},{passive:!0});l.addEventListener("touchend",e=>{if(!h()||!l.classList.contains("mobile-open"))return;const s=e.changedTouches[0].clientY-H,n=Date.now()-_;l.style.transform="",k&&s>100&&n<500&&E(),k=!1},{passive:!0});document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),X(e.dataset.id)})});const m=document.getElementById("tooltip"),re=m.querySelector(".tooltip-title"),le=m.querySelector(".tooltip-meta");function de(e){const s=Math.min(window.innerHeight-80,Math.max(0,e.top+window.scrollY+10)),n=Math.min(window.innerWidth-380,Math.max(0,e.left+window.scrollX+10));m.style.top=`${s}px`,m.style.left=`${n}px`}function ue(e){const t=e.dataset.timestamp,s=e.dataset.dotType,n=new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),a={blog:"📝",saved:"🔖",bluesky:"🦋",pixelfed:"📷",posts:"🦋",release:"🏷️",wikipedia:"🌐",contributions:"🌐"},o={saved:"Article Read",bluesky:"Posts",pixelfed:"Photo",posts:"Posts",wikipedia:"Contributions",contributions:"Contributions"},c=a[s]||"",i=o[s]||s.toUpperCase();re.textContent=`${c} ${i}`,le.textContent=n,de(e.getBoundingClientRect()),m.removeAttribute("hidden")}function he(){m.setAttribute("hidden","")}document.querySelectorAll(".dot").forEach(e=>{const t=e;t.addEventListener("mouseenter",()=>ue(t)),t.addEventListener("mouseleave",he)});const z=N.get("id");z&&X(z);
